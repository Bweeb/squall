<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'>
<h1 id="label-Squall+%7BSquall+Build+Status%7D%5Bhttp%3A%2F%2Ftravis-ci.org%2Fsite5%2Fsquall%5D">Squall <a href="https://secure.travis-ci.org/site5/squall.png?branch=master">{Squall Build Status</a>]</h1>

<p>A Ruby library for working with the <a
href="http://onapp.com/cloud/technology/api/">OnApp REST API</a>.</p>

<p>Squall has been tested on MRI versions 1.9.2, 1.9.3, 2.0.0 and
1.9-compatible
JRuby.</p>

<p>Documentation is available in <a
href="http://site5.github.io/squall/">TomDoc</a> format.</p>

<h2 id="label-Install">Install</h2>

<p>To install Squall using <a href="http://bundler.io">Bundler</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_echo'>echo</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gem &#39;squall&#39;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>&gt;&gt;</span> <span class='const'>Gemfile</span>
<span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_install'>install</span></code></pre>

<p>To install Squall globally using RubyGems:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='id identifier rubyid_install'>install</span> <span class='id identifier rubyid_squall'>squall</span></code></pre>

<h2 id="label-Configuration">Configuration</h2>

<p>You have two main options for configuring Squall.</p>

<p>Directly in a config block:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;squall&#39;</span>

<span class="ruby-constant">Squall</span>.<span class="ruby-identifier">config</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">base_uri</span> <span class="ruby-string">&#39;https://onappurl.com&#39;</span> <span class="ruby-comment"># Root level URI for OnApp instance</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">username</span> <span class="ruby-string">&#39;username&#39;</span>             <span class="ruby-comment"># OnApp username</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">password</span> <span class="ruby-string">&#39;topsecret&#39;</span>            <span class="ruby-comment"># OnApp password</span>
  <span class="ruby-identifier">c</span>.<span class="ruby-identifier">debug</span>     <span class="ruby-keyword">true</span>                  <span class="ruby-comment"># Toggle HTTP/Faraday debugging (prints to $stderr)</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Squall can load configuration from a yaml file:</p>

<pre class="code ruby"><code class="ruby"># .squall.yml
base_uri: &#39;https://onappurl.com&#39;
username: &#39;username&#39;
password: &#39;topsecret&#39;
debug: false</code></pre>

<p>To load it (by default it assumes ~/.squall.yml):</p>

<pre class="ruby"><span class="ruby-constant">Squall</span>.<span class="ruby-identifier">config_file</span>(<span class="ruby-string">&quot;/path/to/.squall.yml&quot;</span>)
</pre>

<p>It is also possible to change individual configuration settings on the fly.</p>

<pre class="ruby"><span class="ruby-constant">Squall</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-keyword">true</span>)
</pre>

<p>Note: you will need to re-instantiate all modules after changing
Squall&#39;s configuration.</p>

<h2 id="label-Usage">Usage</h2>

<p>Show the info for a VM:</p>

<pre class="ruby"><span class="ruby-identifier">vm</span> = <span class="ruby-constant">Squall</span><span class="ruby-operator">::</span><span class="ruby-constant">VirtualMachine</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">vm</span>.<span class="ruby-identifier">show</span> <span class="ruby-value">1</span>
</pre>

<p>Create a new VM:</p>

<pre class="ruby"><span class="ruby-identifier">vm</span> = <span class="ruby-constant">Squall</span><span class="ruby-operator">::</span><span class="ruby-constant">VirtualMachine</span>.<span class="ruby-identifier">new</span>

<span class="ruby-identifier">params</span> = {
  <span class="ruby-identifier">label</span><span class="ruby-operator">:</span>             <span class="ruby-string">&#39;testmachine&#39;</span>,
  <span class="ruby-identifier">hypervisor_id</span><span class="ruby-operator">:</span>     <span class="ruby-value">5</span>,
  <span class="ruby-identifier">hostname</span><span class="ruby-operator">:</span>          <span class="ruby-string">&#39;testmachine&#39;</span>,
  <span class="ruby-identifier">memory</span><span class="ruby-operator">:</span>            <span class="ruby-value">512</span>,
  <span class="ruby-identifier">cpus</span><span class="ruby-operator">:</span>              <span class="ruby-value">1</span>,
  <span class="ruby-identifier">cpu_shares</span><span class="ruby-operator">:</span>        <span class="ruby-value">10</span>,
  <span class="ruby-identifier">primary_disk_size</span><span class="ruby-operator">:</span> <span class="ruby-value">10</span>,
  <span class="ruby-identifier">template_id</span><span class="ruby-operator">:</span>       <span class="ruby-value">1</span>
}

<span class="ruby-identifier">vm</span>.<span class="ruby-identifier">create</span> <span class="ruby-identifier">params</span>
</pre>

<h2 id="label-Supported+Methods">Supported Methods</h2>

<p>This gem partially implements the OnApp API v2.3.</p>

<p>The following OnApp modules have been added:</p>
<ul><li>
<p>Data store zones</p>
</li><li>
<p>Firewall rules</p>
</li><li>
<p>Hypervisors</p>
</li><li>
<p>Hypervisor zones</p>
</li><li>
<p>IP addresses</p>
</li><li>
<p>IP address joins</p>
</li><li>
<p>Networks</p>
</li><li>
<p>Network zones</p>
</li><li>
<p>Users</p>
</li><li>
<p>User groups</p>
</li><li>
<p>Roles</p>
</li><li>
<p>Statistics</p>
</li><li>
<p>Templates</p>
</li><li>
<p>Transactions</p>
</li><li>
<p>Virtual machines</p>
</li><li>
<p>Whitelists</p>
</li><li>
<p>Disks</p>
</li></ul>

<p>The following still need to be added:</p>
<ul><li>
<p>Billing plans</p>
</li><li>
<p>Currencies</p>
</li><li>
<p>Network interfaces</p>
</li><li>
<p>Template groups</p>
</li><li>
<p>Software licenses</p>
</li><li>
<p>Resolvers</p>
</li><li>
<p>VM autoscaling</p>
</li><li>
<p>Load Balancers</p>
</li><li>
<p>CDN edge servers</p>
</li><li>
<p>CDN resources</p>
</li><li>
<p>CDN edge groups</p>
</li><li>
<p>Backups</p>
</li><li>
<p>Autobackup Presets</p>
</li><li>
<p>Schedules</p>
</li><li>
<p>SSH keys</p>
</li><li>
<p>Alerts</p>
</li><li>
<p>Logs</p>
</li><li>
<p>System configuration</p>
</li></ul>

<h2 id="label-Tests">Tests</h2>

<p>Squall uses rspec for tests. To run:</p>

<pre class="code ruby"><code class="ruby">bundle exec rake # Runs all tests
bundle exec rspec spec/squall/[module]_spec.rb # Runs tests for a specific module</code></pre>

<p>Squall uses <a href="https://github.com/myronmarston/vcr">VCR</a> to cache
server
responses to test against. To test via live http connections, pass
RERECORD=1
into test command. NOTE: since OnApp does not currently support
a test
environment this is not recommended unless you know what you&#39;re
doing, as it
will destroy live data!</p>

<p>Known issues:</p>
<ol><li>
<p>VirtualMachine#change_user currently breaks the parser on an invalid

user_id because OnApp returns html instead of JSON</p>
</li><li>
<p>VirtualMachine#create is currently broken in certain cases.</p>
</li><li>
<p>FirewallRule#edit and #create break the parser by returning invalid JSON</p>
</li></ol>

<h2 id="label-Note+on+Patches%2FPull+Requests">Note on Patches/Pull Requests</h2>
<ul><li>
<p>Fork the project.</p>
</li><li>
<p>Make your feature addition or bug fix.</p>
</li><li>
<p>Add tests for it. This is important so I don&#39;t break it in a
 future
version unintentionally.</p>
</li><li>
<p>Commit, do not mess with rakefile, version, or history.
 (if you want to
have your own version, that is fine but bump version in a
 commit by itself
I can ignore when I pull)</p>
</li><li>
<p>Send me a pull request. Bonus points for topic branches.</p>
</li></ul>

<h2 id="label-Copyright">Copyright</h2>

<p>Copyright Â© 2010-2014 Site5.com. See LICENSE for details.</p>
</div></div>

    <div id="footer">
  Generated on Tue Mar  4 13:54:09 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-2.0.0).
</div>

  </body>
</html>